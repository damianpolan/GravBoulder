package com.example.gravboulder.menu;

import org.andengine.entity.scene.Scene;
import org.andengine.entity.sprite.ButtonSprite;

import android.content.Intent;
import android.view.Display;

import com.example.gravboulder.R;
import com.example.gravboulder.RelCoo;
import com.example.gravboulder.Resource;

public class MainMenuScene extends Scene
{

	public MainMenuScene(GameActivity gameActivity)
	{
		Display display = gameActivity.getWindowManager().getDefaultDisplay();
		float ratio = (float) display.getHeight() / (float) display.getWidth();

		gameActivity.getEngine().getCamera().setXMax(300);
		gameActivity.getEngine().getCamera().setXMin(0);
		gameActivity.getEngine().getCamera().setYMax(300 * ratio);
		gameActivity.getEngine().getCamera().setYMin(0);

		RelCoo.dimsX = 300;
		RelCoo.dimsY = 300 * ratio;

		final ButtonSprite playSprite = new ButtonSprite(RelCoo.getRelX(0.5f, true), RelCoo.getRelY(0.4f, true),
				gameActivity.resource.menuTextureHolder.textureRegion_Play, gameActivity.getVertexBufferObjectManager());
		RelCoo.displaceToCentre(playSprite);
		playSprite.setOnClickListener(new ButtonSprite.OnClickListener()
		{
			@Override
			public void onClick(ButtonSprite pButtonSprite, float pTouchAreaLocalX, float pTouchAreaLocalY)
			{
				//playSprite.setColor(new Color(0.5f, 0.5f, 0.5f));
				gameActivity.startActivity(new Intent(Resource.get().getCurrActivity(), GameActivity.class));
				gameActivity.overridePendingTransition(R.anim.enter_from_right, R.anim.exit_out_left);

				//TODO: MAKE TRANSITION WORK ON SECOND PLAY PRESS
			}
		});
		registerTouchArea(playSprite);
		attachChild(playSprite);

		final ButtonSprite levelSprite = new ButtonSprite(RelCoo.getRelX(0.5f, true), RelCoo.getRelY(0.5f, true),
				Resource.get().menuTextureHolder.textureRegion_LevelSelect, Resource.get().getCurrActivity().getVertexBufferObjectManager());
		RelCoo.displaceToCentre(levelSprite);
		registerTouchArea(levelSprite);
		attachChild(levelSprite);

	}
}
